{"ast":null,"code":"import _objectSpread from\"D:/MilitaryAssetManagementSystem/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TransactionHistory(){const[purchases,setPurchases]=useState([]);const[type,setType]=useState('');const[startDate,setStartDate]=useState('');const[endDate,setEndDate]=useState('');const token=localStorage.getItem('token');const fetchPurchases=async function(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{const response=await axios.get('http://localhost:5000/api/assets/purchases',{headers:{Authorization:\"Bearer \".concat(token)},params:_objectSpread({},filters)});setPurchases(response.data);}catch(err){console.error('Failed to fetch purchases:',err);}};// Initial load\nuseEffect(()=>{fetchPurchases();},[]);const handleApplyFilters=()=>{fetchPurchases({type,startDate,endDate});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Purchase History\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type: \"}),/*#__PURE__*/_jsxs(\"select\",{value:type,onChange:e=>setType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Weapon\",children:\"Weapon\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Vehicle\",children:\"Vehicle\"})]}),/*#__PURE__*/_jsx(\"label\",{style:{marginLeft:'10px'},children:\"From: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:startDate,onChange:e=>setStartDate(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{style:{marginLeft:'10px'},children:\"To: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:endDate,onChange:e=>setEndDate(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleApplyFilters,style:{marginLeft:'10px'},children:\"Apply Filters\"})]}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"8\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Purchase ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Asset Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Purchased On\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:purchases.map((p,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.asset_id}),/*#__PURE__*/_jsx(\"td\",{children:p.asset_name}),/*#__PURE__*/_jsx(\"td\",{children:p.type}),/*#__PURE__*/_jsx(\"td\",{children:p.quantity}),/*#__PURE__*/_jsx(\"td\",{children:p.purchased_on})]},index))})]})]});}export default TransactionHistory;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","TransactionHistory","purchases","setPurchases","type","setType","startDate","setStartDate","endDate","setEndDate","token","localStorage","getItem","fetchPurchases","filters","arguments","length","undefined","response","get","headers","Authorization","concat","params","_objectSpread","data","err","console","error","handleApplyFilters","style","padding","children","marginBottom","value","onChange","e","target","marginLeft","onClick","border","cellPadding","map","p","index","asset_id","asset_name","quantity","purchased_on"],"sources":["D:/MilitaryAssetManagementSystem/frontend/src/pages/TransactionHistory.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction TransactionHistory() {\r\n  const [purchases, setPurchases] = useState([]);\r\n\r\n  const [type, setType] = useState('');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n\r\n  const token = localStorage.getItem('token');\r\n\r\n  const fetchPurchases = async (filters = {}) => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/assets/purchases', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        params: { ...filters }\r\n      });\r\n      setPurchases(response.data);\r\n    } catch (err) {\r\n      console.error('Failed to fetch purchases:', err);\r\n    }\r\n  };\r\n\r\n  // Initial load\r\n  useEffect(() => {\r\n    fetchPurchases();\r\n  }, []);\r\n\r\n  const handleApplyFilters = () => {\r\n    fetchPurchases({\r\n      type,\r\n      startDate,\r\n      endDate\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <h2>Purchase History</h2>\r\n\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <label>Type: </label>\r\n        <select value={type} onChange={e => setType(e.target.value)}>\r\n          <option value=\"\">All</option>\r\n          <option value=\"Weapon\">Weapon</option>\r\n          <option value=\"Vehicle\">Vehicle</option>\r\n        </select>\r\n\r\n        <label style={{ marginLeft: '10px' }}>From: </label>\r\n        <input type=\"date\" value={startDate} onChange={e => setStartDate(e.target.value)} />\r\n\r\n        <label style={{ marginLeft: '10px' }}>To: </label>\r\n        <input type=\"date\" value={endDate} onChange={e => setEndDate(e.target.value)} />\r\n\r\n        <button onClick={handleApplyFilters} style={{ marginLeft: '10px' }}>Apply Filters</button>\r\n      </div>\r\n\r\n      <table border=\"1\" cellPadding=\"8\">\r\n        <thead>\r\n          <tr>\r\n            <th>Purchase ID</th>\r\n            <th>Asset Name</th>\r\n            <th>Type</th>\r\n            <th>Quantity</th>\r\n            <th>Purchased On</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {purchases.map((p, index) => (\r\n            <tr key={index}>\r\n              <td>{p.asset_id}</td>\r\n              <td>{p.asset_name}</td>\r\n              <td>{p.type}</td>\r\n              <td>{p.quantity}</td>\r\n              <td>{p.purchased_on}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TransactionHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}