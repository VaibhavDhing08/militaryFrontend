{"ast":null,"code":"import _objectSpread from\"D:/MilitaryAssetManagementSystem/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AssetPurchase(){const[assetData,setAssetData]=useState({asset_name:'',type:'',base_id:'',quantity:'',purchased_on:''});const[filters,setFilters]=useState({type:'',startDate:'',endDate:''});const[purchaseHistory,setPurchaseHistory]=useState([]);const handleChange=e=>{setAssetData(_objectSpread(_objectSpread({},assetData),{},{[e.target.name]:e.target.value}));};const handleFilterChange=e=>{setFilters(_objectSpread(_objectSpread({},filters),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');await axios.post('http://localhost:5000/api/assets/purchase',assetData,{headers:{Authorization:\"Bearer \".concat(token)}});alert('Asset purchased successfully!');setAssetData({asset_name:'',type:'',base_id:'',quantity:'',purchased_on:''});fetchPurchaseHistory();}catch(err){console.error(err);alert('Error purchasing asset');}};const fetchPurchaseHistory=async()=>{try{const token=localStorage.getItem('token');const params={};if(filters.type)params.type=filters.type;if(filters.startDate)params.startDate=filters.startDate;if(filters.endDate)params.endDate=filters.endDate;const res=await axios.get('http://localhost:5000/api/assets/purchases',{headers:{Authorization:\"Bearer \".concat(token)},params});setPurchaseHistory(res.data);}catch(err){console.error(err);}};useEffect(()=>{fetchPurchaseHistory();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Purchase New Asset\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"asset_name\",placeholder:\"Asset Name\",value:assetData.asset_name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"type\",placeholder:\"Type\",value:assetData.type,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"base_id\",placeholder:\"Base ID\",value:assetData.base_id,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"quantity\",placeholder:\"Quantity\",value:assetData.quantity,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"purchased_on\",value:assetData.purchased_on,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Purchase Asset\"})]}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:'30px'},children:\"Purchase History Filters\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"type\",placeholder:\"Equipment Type\",value:filters.type,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:filters.startDate,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",value:filters.endDate,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchPurchaseHistory,children:\"Apply Filters\"}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:'30px'},children:\"Purchase History\"}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"8\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Asset Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Base ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Purchased On\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:purchaseHistory.map((purchase,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:purchase.asset_id}),/*#__PURE__*/_jsx(\"td\",{children:purchase.asset_name}),/*#__PURE__*/_jsx(\"td\",{children:purchase.type}),/*#__PURE__*/_jsx(\"td\",{children:purchase.base_id}),/*#__PURE__*/_jsx(\"td\",{children:purchase.quantity}),/*#__PURE__*/_jsx(\"td\",{children:purchase.purchased_on})]},index))})]})]});}export default AssetPurchase;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","AssetPurchase","assetData","setAssetData","asset_name","type","base_id","quantity","purchased_on","filters","setFilters","startDate","endDate","purchaseHistory","setPurchaseHistory","handleChange","e","_objectSpread","target","name","value","handleFilterChange","handleSubmit","preventDefault","token","localStorage","getItem","post","headers","Authorization","concat","alert","fetchPurchaseHistory","err","console","error","params","res","get","data","style","padding","children","onSubmit","placeholder","onChange","required","marginTop","onClick","border","cellPadding","map","purchase","index","asset_id"],"sources":["D:/MilitaryAssetManagementSystem/frontend/src/pages/AssetPurchase.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction AssetPurchase() {\r\n  const [assetData, setAssetData] = useState({\r\n    asset_name: '', type: '', base_id: '', quantity: '', purchased_on: ''\r\n  });\r\n  const [filters, setFilters] = useState({ type: '', startDate: '', endDate: '' });\r\n  const [purchaseHistory, setPurchaseHistory] = useState([]);\r\n\r\n  const handleChange = (e) => {\r\n    setAssetData({ ...assetData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleFilterChange = (e) => {\r\n    setFilters({ ...filters, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n\r\n      await axios.post('http://localhost:5000/api/assets/purchase', assetData, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      alert('Asset purchased successfully!');\r\n      setAssetData({ asset_name: '', type: '', base_id: '', quantity: '', purchased_on: '' });\r\n      fetchPurchaseHistory();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Error purchasing asset');\r\n    }\r\n  };\r\n\r\n  const fetchPurchaseHistory = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n\r\n      const params = {};\r\n      if (filters.type) params.type = filters.type;\r\n      if (filters.startDate) params.startDate = filters.startDate;\r\n      if (filters.endDate) params.endDate = filters.endDate;\r\n\r\n      const res = await axios.get('http://localhost:5000/api/assets/purchases', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        params\r\n      });\r\n\r\n      setPurchaseHistory(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { fetchPurchaseHistory(); }, []);\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <h2>Purchase New Asset</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input type=\"text\" name=\"asset_name\" placeholder=\"Asset Name\" value={assetData.asset_name} onChange={handleChange} required /><br />\r\n        <input type=\"text\" name=\"type\" placeholder=\"Type\" value={assetData.type} onChange={handleChange} required /><br />\r\n        <input type=\"number\" name=\"base_id\" placeholder=\"Base ID\" value={assetData.base_id} onChange={handleChange} required /><br />\r\n        <input type=\"number\" name=\"quantity\" placeholder=\"Quantity\" value={assetData.quantity} onChange={handleChange} required /><br />\r\n        <input type=\"date\" name=\"purchased_on\" value={assetData.purchased_on} onChange={handleChange} required /><br />\r\n        <button type=\"submit\">Purchase Asset</button>\r\n      </form>\r\n\r\n      <h3 style={{ marginTop: '30px' }}>Purchase History Filters</h3>\r\n      <input type=\"text\" name=\"type\" placeholder=\"Equipment Type\" value={filters.type} onChange={handleFilterChange} />\r\n      <input type=\"date\" name=\"startDate\" value={filters.startDate} onChange={handleFilterChange} />\r\n      <input type=\"date\" name=\"endDate\" value={filters.endDate} onChange={handleFilterChange} />\r\n      <button onClick={fetchPurchaseHistory}>Apply Filters</button>\r\n\r\n      <h3 style={{ marginTop: '30px' }}>Purchase History</h3>\r\n      <table border=\"1\" cellPadding=\"8\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th><th>Asset Name</th><th>Type</th><th>Base ID</th><th>Quantity</th><th>Purchased On</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {purchaseHistory.map((purchase, index) => (\r\n            <tr key={index}>\r\n              <td>{purchase.asset_id}</td>\r\n              <td>{purchase.asset_name}</td>\r\n              <td>{purchase.type}</td>\r\n              <td>{purchase.base_id}</td>\r\n              <td>{purchase.quantity}</td>\r\n              <td>{purchase.purchased_on}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AssetPurchase;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}